<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Web CAGD - Jiaming</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../../../assets/css/main.css" />
		<noscript><link rel="stylesheet" href="../../../assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<a href="../../../index.html" class="logo">Jiaming</a>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul class="links">
							<li><a href="../../../index.html">Jiaming的博客</a></li>
							<li><a href="../../../yangjiaming.html">Yang-Jiaming</a></li>
							<li><a href="../../../songjiaming.html">Song-Jiaming</a></li>
						</ul>
						<ul class="icons">
							<li><a href="https://github.com/jiaming1106" class="icon fa-github"><span class="label">GitHub</span></a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
							<section class="post">
								<header class="major">
									<span class="date">October 07, 2018</span>
									<h1>Web CAGD</h1>
									<p>2018年年初，为了完成 CAGD课程大作业，编写了一个网页版 CAD软件 DEMO。由于原服务器以及域名(<a href="http://www.cagd.xyz">www.cagd.xyz</a>)即将过期，搬运到此处收藏，并提供了一些操作说明。点击主题图片即可进入Web CAGD。</p>
								</header>
								<a href="cagd/index.html" class="image main" target="_blank"><img src="../../../images/pic02.png" alt="" /></a>
								<h2>简介</h2>
								<p>Web CAGD实现的主要功能是三维B样条曲线曲面的交互生成和编辑，包括控制顶点的拖动、次数的改变、节点矢量的编辑、插入节点等。这些都是一般的CAD软件中常见的基础操作。其涉及到的主要理论基础是计算几何中的曲线曲面理论。这里只实现了B样条方法而没有使用最为流行的NURBS方法，主要原因是当时课程作业的要求，其次是NURBS的一些核心计算方法其实就是在B样条基础上再添加一些简单的计算而已。Web CAGD实现了基函数的显示功能，这在一般的CAD软件中应该不会出现的，因为这涉及到了样条方法最基础的数学原理。在此主要是有助于CAGD课程的学习。<br />
								Web CAGD主要的编写语言是JavaScript以及一小部分HTML，文件的上传和下载涉及到了非常基础的PHP。主要基于的JSP库是非常知名的three.js，这个库基本上是在web上进行三维图形开发必备的库了。原本也曾尝试就直接使用html基础的二维canvas来编写这个程序，结果只实现了平面曲线的编辑，三维的工作量实在巨大。<br />
								通常人们一提到WebGL就会说是three.js，不过使用后其实会发现，现在的three.js并不像OpenGL那么底层。在普通的应用场景下three.js不需要编程人员考虑着色器那些抽象繁琐的东西，而是设计一些更为顶层的图形、对象、场景这一类东西。因此three.js其实是在WebGL概念上开发出的更为顶层的API。其中Object和Scene的框架也让我深受启发，后来应用到了其他平台上。three.js中应该是有样条曲线对象的，不过那个样条对象是无法进行交互的。因此在Web CAGD中，B样条相关的程序都是完全从基础的数学计算开始写起的，以便于程序所需的一些交互编辑操作。<br />
								不过我们其实在2018的元旦才开始在课余时间接触JSP，这个Web CAGD也只是在2018春节之后用一周的时间完成的，因此代码质量其实非常低，无法长时间使用，非常占据内存。我们确实没有系统学习过JSP，只是用到什么就学习了哪里，其实有很多地方有待斟酌。希望以后有机会可以对这个程序进行优化，为大家提供更好的工具。<br />
								最后还要补充一点，由于是第一次进行web开发并且时间非常有限，Web CAGD在开发时只在Chrome浏览器上进行了测试。代码编写中完全没有考虑各个浏览器之间的差异，因此可能在其他浏览器上会出现无法正常使用的情况。</p>
								<h2>操作说明</h2>
								<h3>基础操作</h3>
								<ol>
									<li>按住鼠标<b>左键</b>拖动可进行图形旋转。</li>
									<li>按住鼠标<b>右键</b>拖动可进行图形平移。</li>
									<li>上下滑动<b>滚轮</b>可放大或缩小图形。</li>
								</ol>
								<h3>创建平面曲线</h3>
								<ol>
									<li>点击屏幕右侧控制菜单--创建--创建平面曲线；</li>
									<li>鼠标左键选择绘制曲线的基面，视角变换为正对基面；</li>
									<li>在基面上用鼠标左键点击，依次创建曲线的控制顶点；</li>
									<li>绘制完成后，点击创建平面曲线菜单中的完成创建按钮，记录所绘制的曲线；</li>
									<li>若希望放弃所绘制的曲线，点击创建平面曲线菜单中的取消按钮。</li>
								</ol>
								<h3>编辑曲线</h3>
								<ol>
									<li>鼠标移动至需要改变的蓝色控制顶点处，控制顶点变为红色。鼠标左键单击控制顶点，出现三个方向的移动引导线；</li>
									<li>鼠标移动至需要改变的引导线方向，引导线变为红色，按下左键沿着引导线拖动，可使控制顶点按照引导方向平移；</li>
									<li>完成控制顶点的编辑后，在空白区域点击鼠标右键，退出编辑模式，引导线消失。点击左侧列表菜单中对应曲线的隐藏控制网格按钮，可以隐藏其控制顶点其控制网格。</li>
									<li>点击显示基函数按钮会出现曲线对应的基函数图像。</li>
									<li>在曲线类型的下拉菜单里可以选择不同的参数化方法。其中的PieceWiseBezier类型受到控制顶点个数及曲线次数的限制。</li>
									<li>拖动曲线此处右侧滑块，可以实时改变对应曲线的次数，次数越高曲线越远离控制网格。曲线的最高次数是由控制顶点的个数决定。</li>
									<li>点击插入节点按钮会出现节点插入菜单。调整节点位置右侧滑块可以设定节点插入的位置（0到1之间）。点击插入即执行一次节点插入操作。节点插入可以增加控制顶点，增加曲线局部形状控制的自由度。</li>
									<li>点击删除按钮可删除对应的曲线。</li>
								</ol>
								<h3>创建拉伸曲面</h3>
								<ol>
									<li>点击屏幕右侧控制菜单--创建--创建拉伸曲面；</li>
									<li>鼠标左键选择一条已经绘制好的平面曲线作为拉伸曲线，注意在这里必须为平面曲线，而不能为自由的三维曲线，这主要是因为三维曲线的特殊情况很多，而且拉伸方向难以简单的选择，因此为简单显示效果在此只支持平面曲线的拉伸；</li>
									<li>选择拉伸的曲线后弹出拉伸曲面菜单，改变拉伸长度的数值可以更改拉伸的长度大小；</li>
									<li>点击完成即完成曲面拉伸；</li>
									<li>若希望放弃所绘制的曲面，点击取消按钮。</li>
								</ol>
								<h3>编辑曲面</h3>
								<p>具体操作与曲线的编辑操作完全相同，只不过曲面可以在u、v两个方向上分别进行操作。注意在点击控制顶点进入控制顶点编辑状态后，颜色发生变化的曲面为该控制顶点所影响的曲面区域。</p>
								<h3>文件保存与读取</h3>
								<ol>
									<li>点击屏幕右侧控制菜单--文件--保存；</li>
									<li>可对绘制的所有曲线曲面进行保存，保存格式为只有Web CAGD可以读取的cagd格式，该格式存储了曲线曲面绘制所需的必要信息，包括控制顶点个数、曲线次数、控制顶点位置、节点矢量等。若需要具体解析可直接阅读Main_button.js文件中的save_file函数。</li>
									<li>对于本地的cagd格式文件可以通过打开按钮来选择打开。</li>
									<li>注：目前GITHUB的服务器上，只支持静态页面，不支持php，所以文件保存功能无法使用。若要保存文件请访问网页原服务器（<a href="http://www.cagd.xyz">www.cagd.xyz</a>）</li>
								</ol>
							</section>

					</div>

				<!-- Footer -->
					<footer id="footer">
						<section>
							<form method="post" action="#">
								<div class="fields">
									<div class="field">
										<label for="name">Name</label>
										<input type="text" name="name" id="name" />
									</div>
									<div class="field">
										<label for="email">Email</label>
										<input type="text" name="email" id="email" />
									</div>
									<div class="field">
										<label for="message">Message</label>
										<textarea name="message" id="message" rows="3"></textarea>
									</div>
								</div>
								<ul class="actions">
									<li><input type="submit" value="Send Message" /></li>
								</ul>
							</form>
						</section>
						<section class="split contact">
							<section class="alt">
								<h3>Phone</h3>
								<p>(+86) 136-2100-1343<br />
								(+86) 131-3226-8172</p>
							</section>
							<section class="alt">
								<h3>Email</h3>
								<p>williamyjm@163.com<br />
								songjiaming@163.com</p>
							</section>
							<section>
								<h3>Social</h3>
								<ul class="icons alt">
									<li><a href="https://github.com/jiaming1106" class="icon alt fa-github"><span class="label">GitHub</span></a></li>
								</ul>
							</section>
						</section>
					</footer>

				<!-- Copyright -->
					<div id="copyright">
						<ul><li>&copy; Untitled</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li></ul>
					</div>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>